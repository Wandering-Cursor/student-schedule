import{D as V,E as c,a1 as P,a0 as N,o as r,c as m,x as e,v as n,d as v,f as g,b as p,t as f,F as T,z as x,H as E,$ as w,_ as I,A as U}from"./index-DEXWhyHr.js";import{a as L,b as z}from"./index-xop0SwAF.js";import{a as A}from"./index-BpBlo5El.js";import{s as H,a as M}from"./index-B6mUpnZ6.js";import{s as j}from"./index-Bs8XTSbf.js";import{a as q}from"./schedule-DNOHfN98.js";import{C as G}from"./CombinedScheduleItem-BMdynbsx.js";import"./index-BfecAaWX.js";import"./index-Dy85YIzt.js";import"./index-BRKpW_at.js";import"./index-CyDcLbn-.js";import"./datetime-C6SBiSiX.js";import"./GroupLink-DZe8ahGP.js";import"./AnyLink-DMnjoF3k.js";const J={class:"filter-panel"},K={for:"for-date-input"},O={for:"from-date-input"},Q={for:"to-date-input"},R=V({__name:"CombinedSchedule",setup(D){const d=c(0),s=c(!1),i=c(),b=c({count:0,next:null,previous:null,results:[]}),t=P({page:1,forDate:void 0,dateTo:void 0,dateFrom:void 0}),u=async()=>{s.value=!0;try{const a=await q(t);b.value=a.data,i.value=a.data.results,d.value=t.page*10-10}catch(a){if(t.page!=1)return t.page=1,console.debug("Error loading page, retrying with page 1"),u();throw a}s.value=!1};return N(async()=>{await u()}),(a,l)=>{const B=j,_=H,h=M,k=E,$=w,y=A,C=L,S=z;return r(),m("main",null,[e($,{header:a.$t("schedule.combined")},{default:n(()=>[s.value?(r(),v(B,{key:0,width:"100%",height:"50vh"})):g("",!0),s.value?g("",!0):(r(),v($,{key:1,header:a.$t("labels.filters"),toggleable:"",collapsed:!0},{default:n(()=>[p("div",J,[e(h,{variant:"on",class:"flex"},{default:n(()=>[e(_,{modelValue:t.forDate,"onUpdate:modelValue":l[0]||(l[0]=o=>t.forDate=o),id:"for-date-input",showButtonBar:""},null,8,["modelValue"]),p("label",K,f(a.$t("schedule.filters.forDate")),1)]),_:1}),e(h,{variant:"on",class:"flex"},{default:n(()=>[e(_,{modelValue:t.dateFrom,"onUpdate:modelValue":l[1]||(l[1]=o=>t.dateFrom=o),id:"from-date-input",showButtonBar:""},null,8,["modelValue"]),p("label",O,f(a.$t("schedule.filters.fromDate")),1)]),_:1}),e(h,{variant:"on",class:"flex"},{default:n(()=>[e(_,{modelValue:t.dateTo,"onUpdate:modelValue":l[2]||(l[2]=o=>t.dateTo=o),id:"to-date-input",showButtonBar:""},null,8,["modelValue"]),p("label",Q,f(a.$t("schedule.filters.toDate")),1)]),_:1}),e(k,{label:a.$t("labels.applyFilters"),onClick:u,disabled:s.value},null,8,["label","disabled"])])]),_:1},8,["header"])),s.value?g("",!0):(r(),v(C,{key:2,value:i.value,"data-key":"uuid",rows:10},{list:n(o=>[(r(!0),m(T,null,x(o.items,F=>(r(),m("div",null,[e(G,{schedule:F},null,8,["schedule"]),e(y)]))),256))]),_:1},8,["value"])),e(S,{"total-records":b.value.count,rows:10,onPage:l[3]||(l[3]=o=>{t.page=o.page+1,u()}),first:d.value},null,8,["total-records","first"])]),_:1},8,["header"])])}}}),W=I(R,[["__scopeId","data-v-1734f447"]]),X={class:"contained-wrapper"},pe=V({__name:"ScheduleView",setup(D){return(d,s)=>{const i=w;return r(),m("main",X,[e(i,{header:d.$t("schedule.title")},{default:n(()=>[U(f(d.$t("schedule.description")),1)]),_:1},8,["header"]),e(W)])}}});export{pe as default};
