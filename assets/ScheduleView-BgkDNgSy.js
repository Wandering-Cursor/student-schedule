import{D as w,E as c,a1 as P,a0 as x,o as n,c as m,d as v,f as g,v as r,b as p,x as e,t as f,F as N,z as T,H as E,$ as V,_ as I,A as U}from"./index-49wk4mmK.js";import{a as L,b as z}from"./index-IRyQn90_.js";import{a as A}from"./index-BH9xpBtv.js";import{s as H,a as M}from"./index-WgA2OSYe.js";import{s as j}from"./index-DJTXnWog.js";import{a as q}from"./schedule-BnklUYw0.js";import{C as G}from"./CombinedScheduleItem-CwZoX8tx.js";import"./index-CNEhaxCU.js";import"./index-Cho9b22A.js";import"./index-9V1q2Vcv.js";import"./index-BSVWiWQY.js";import"./datetime-C6SBiSiX.js";import"./GroupLink-DzAS92ua.js";import"./AnyLink-p20-Kenm.js";const J={class:"contained-wrapper"},K={class:"filter-panel"},O={for:"for-date-input"},Q={for:"from-date-input"},R={for:"to-date-input"},W=w({__name:"CombinedSchedule",setup(D){const d=c(0),s=c(!1),i=c(),b=c({count:0,next:null,previous:null,results:[]}),t=P({page:1,forDate:void 0,dateTo:void 0,dateFrom:void 0}),u=async()=>{s.value=!0;try{const a=await q(t);b.value=a.data,i.value=a.data.results,d.value=t.page*10-10}catch(a){if(t.page!=1)return t.page=1,console.debug("Error loading page, retrying with page 1"),u();throw a}s.value=!1};return x(async()=>{await u()}),(a,l)=>{const B=j,_=H,h=M,k=E,$=V,y=A,C=L,S=z;return n(),m("main",J,[s.value?(n(),v(B,{key:0,width:"100%",height:"50vh"})):g("",!0),s.value?g("",!0):(n(),v($,{key:1,header:a.$t("labels.filters"),toggleable:"",collapsed:!0},{default:r(()=>[p("div",K,[e(h,{variant:"on",class:"flex"},{default:r(()=>[e(_,{modelValue:t.forDate,"onUpdate:modelValue":l[0]||(l[0]=o=>t.forDate=o),id:"for-date-input",showButtonBar:""},null,8,["modelValue"]),p("label",O,f(a.$t("schedule.filters.forDate")),1)]),_:1}),e(h,{variant:"on",class:"flex"},{default:r(()=>[e(_,{modelValue:t.dateFrom,"onUpdate:modelValue":l[1]||(l[1]=o=>t.dateFrom=o),id:"from-date-input",showButtonBar:""},null,8,["modelValue"]),p("label",Q,f(a.$t("schedule.filters.fromDate")),1)]),_:1}),e(h,{variant:"on",class:"flex"},{default:r(()=>[e(_,{modelValue:t.dateTo,"onUpdate:modelValue":l[2]||(l[2]=o=>t.dateTo=o),id:"to-date-input",showButtonBar:""},null,8,["modelValue"]),p("label",R,f(a.$t("schedule.filters.toDate")),1)]),_:1}),e(k,{label:a.$t("labels.applyFilters"),onClick:u,disabled:s.value},null,8,["label","disabled"])])]),_:1},8,["header"])),e($,null,{default:r(()=>[s.value?g("",!0):(n(),v(C,{key:0,value:i.value,"data-key":"uuid",rows:10},{list:r(o=>[(n(!0),m(N,null,T(o.items,F=>(n(),m("div",null,[e(G,{schedule:F},null,8,["schedule"]),e(y)]))),256))]),_:1},8,["value"])),e(S,{"total-records":b.value.count,rows:10,onPage:l[3]||(l[3]=o=>{t.page=o.page+1,u()}),first:d.value},null,8,["total-records","first"])]),_:1})])}}}),X=I(W,[["__scopeId","data-v-8a2417ef"]]),Y={class:"contained-wrapper"},me=w({__name:"ScheduleView",setup(D){return(d,s)=>{const i=V;return n(),m("main",Y,[e(i,{header:d.$t("schedule.title")},{default:r(()=>[U(f(d.$t("schedule.description")),1)]),_:1},8,["header"]),e(X)])}}});export{me as default};
