import{s as I,a as S,b as L}from"./index-IRyQn90_.js";import{s as F,a as P}from"./index-BH9xpBtv.js";import{D as V,o as g,d as h,v as u,x as a,Y as f,E as c,a0 as w,a1 as E,c as y,b,t as q,F as H,z as N,a2 as U,H as j,$}from"./index-49wk4mmK.js";import{s as x}from"./index-DfSS93Xl.js";import{s as z}from"./index-Cho9b22A.js";import{G as M,V as O}from"./GroupLink-DzAS92ua.js";import{_ as T}from"./SpecialtyLink.vue_vue_type_script_setup_true_lang-YZA3U-sg.js";import{g as Y}from"./specialty-DV8Ijw3U.js";import"./index-CNEhaxCU.js";import"./index-9V1q2Vcv.js";import"./AnyLink-p20-Kenm.js";const A=V({__name:"GroupItem",props:{group:{type:Object,required:!0}},setup(i){return(d,o)=>{const l=F;return g(),h(l,null,{title:u(()=>[a(M,{"group-i-d":i.group.uuid,"group-name":i.group.name},null,8,["group-i-d","group-name"])]),footer:u(()=>[a(T,{"specialty-i-d":i.group.specialty.uuid,"specialty-name":i.group.specialty.name,variant:f(O).H3},null,8,["specialty-i-d","specialty-name","variant"])]),_:1})}}}),J=V({__name:"SpecialtySelector",props:{modelValue:{type:String,required:!1}},emits:["update:modelValue"],setup(i,{emit:d}){const o=d,l=c(!1),m=e=>{o("update:modelValue",e)},n=c([]),p=c(""),v=async()=>{l.value=!0;const e=await Y({name:p.value});n.value=e.data.results,l.value=!1};return w(v),(e,t)=>{const _=I;return g(),h(_,{value:i.modelValue,onInput:t[0]||(t[0]=s=>e.$emit("update:modelValue",s.target.value)),options:n.value,optionLabel:s=>s.name,onChange:m,placeholder:e.$t("specialty.filterBy.entity"),filter:"",onFilter:t[1]||(t[1]=s=>{p.value=s.value,v()}),loading:l.value,showClear:!0},null,8,["value","options","optionLabel","placeholder","loading"])}}}),K={class:"contained-wrapper"},Q={class:"filter-panel"},re=V({__name:"GroupListView",setup(i){const d=c(0),o=c(1),l=c(!1),m=c({count:0,next:null,previous:null,results:[]}),n=E({name:void 0,specialty:void 0}),p=async()=>{l.value=!0;try{const e=await U({page:o.value,...n});m.value=e.data,d.value=o.value*10-10}catch(e){if(o.value!=1)return o.value=1,console.debug("Error loading page, retrying with page 1"),p();throw e}l.value=!1};return w(async()=>{await p()}),(e,t)=>{const _=z,s=x,D=j,B=P,C=S,G=L;return g(),y("main",K,[a(f($),{header:e.$t("groups.title")},{default:u(()=>[b("p",null,q(e.$t("groups.description")),1)]),_:1},8,["header"]),a(f($),{header:e.$t("labels.filters"),toggleable:"",collapsed:!0},{default:u(()=>[b("div",Q,[a(s,null,{default:u(()=>[a(_,{placeholder:e.$t("groups.filterBy.name"),modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=r=>n.name=r)},null,8,["placeholder","modelValue"])]),_:1}),a(s,null,{default:u(()=>[a(J,{"onUpdate:modelValue":t[1]||(t[1]=r=>{if(r.value===null){n.specialty=void 0;return}n.specialty=r.value.uuid})})]),_:1}),a(D,{label:e.$t("labels.applyFilters"),onClick:p,disabled:l.value},null,8,["label","disabled"])])]),_:1},8,["header"]),a(f($),null,{default:u(()=>[a(C,{"data-key":"uuid",value:m.value.results,rows:10},{list:u(r=>[(g(!0),y(H,null,N(r.items,k=>(g(),y("div",null,[a(A,{group:k},null,8,["group"]),a(B)]))),256))]),_:1},8,["value"]),a(G,{"total-records":m.value.count,rows:10,onPage:t[2]||(t[2]=r=>{o.value=r.page+1,p()}),first:d.value},null,8,["total-records","first"])]),_:1})])}}});export{re as default};
