import{D as v,V as N,o as s,d,a6 as P,v as i,A as m,t as f,b as k,Y as g,f as y,x as l,_ as T,E as p,a0 as x,a1 as B,c as h,F as A,z as E,$ as b}from"./index-Bclff-fz.js";import{s as G,a as H}from"./index-DDKeWlob.js";import{s as O}from"./index-a5cjwW5F.js";import{s as U}from"./index-D72YgAV4.js";import{c as j}from"./schedule-DpGQCsSy.js";import{s as q}from"./index-B6qWqnOp.js";import{a as z,b as M}from"./datetime-DUZGPrj3.js";import{V as S}from"./Variant-Cxq8psV2.js";import{g as W}from"./urls-BBdSs22m.js";import{A as w}from"./AnyLink-DjKMJNu4.js";import{S as Y}from"./ScheduleFilters-dohUEAph.js";import"./index-vfcZcwuq.js";import"./index-DEdcLGsu.js";import"./index-C4vsGNcM.js";import"./index-DPdVtkvW.js";import"./index-D6kP3yXN.js";const J={class:"contained-wrapper schedule-item"},K=v({__name:"ShortCombinedScheduleItem",props:{schedule:{type:Object,required:!0}},setup(t){const r=t,o=N(),u=e=>`${z(e.for_date)} - ${e.for_date?M(e.for_date):""}`,c=()=>{const e=o.getGroup();return e&&r.schedule.group_schedules.some(a=>a.group.uuid===e.uuid)?"schedule.group.userGroupIncluded":""};return(e,a)=>{const n=q;return s(),d(n,null,P({title:i(()=>[m(f(u(t.schedule)),1)]),content:i(()=>[k("div",J,[t.schedule.photo_schedule?(s(),d(w,{key:0,"id-field":g(W)(t.schedule.photo_schedule),"name-field":e.$t("schedule.photo.title"),linkTo:"photo-schedule",variant:g(S).H3},null,8,["id-field","name-field","variant"])):y("",!0),l(w,{"id-field":t.schedule.uuid,"name-field":e.$t("labels.view"),linkTo:"schedule-detail",variant:g(S).H4,useLink:!1,class:"schedule-link"},null,8,["id-field","name-field","variant"])])]),_:2},[t.schedule.group_schedules.length>0?{name:"subtitle",fn:i(()=>[m(f(e.$t("schedule.group.count",{count:t.schedule.group_schedules.length}))+" ",1),a[0]||(a[0]=k("br",null,null,-1)),m(" "+f(e.$t(c())),1)]),key:"0"}:void 0]),1024)}}}),Q=T(K,[["__scopeId","data-v-04281747"]]),R={class:"contained-wrapper"},X=v({__name:"CombinedSchedule",setup(t){const r=p(0),o=p(!1),u=p(),c=p({count:0,next:null,previous:null,results:[]}),e=x({page:1,forDate:void 0,dateTo:void 0,dateFrom:void 0}),a=async()=>{o.value=!0;try{const n=await j(e);c.value=n.data,u.value=n.data.results,r.value=e.page*10-10}catch(n){if(e.page!=1)return e.page=1,console.debug("Error loading page, retrying with page 1"),a();throw n}o.value=!1};return B(async()=>{await a()}),(n,$)=>{const D=U,V=O,C=G,L=H,I=b;return s(),h("main",R,[o.value?(s(),d(D,{key:0,width:"100%",height:"50vh"})):(s(),d(Y,{key:1,filters:e,loading:o.value,"onUpdate:filters":a},null,8,["filters","loading"])),l(I,null,{default:i(()=>[o.value?y("",!0):(s(),d(C,{key:0,value:u.value,"data-key":"uuid",rows:10},{list:i(_=>[(s(!0),h(A,null,E(_.items,F=>(s(),h("div",null,[l(Q,{schedule:F},null,8,["schedule"]),l(V)]))),256))]),_:1},8,["value"])),l(L,{"total-records":c.value.count,rows:10,onPage:$[0]||($[0]=_=>{e.page=_.page+1,a()}),first:r.value},null,8,["total-records","first"])]),_:1})])}}}),Z={class:"contained-wrapper"},_e=v({__name:"ScheduleView",setup(t){return(r,o)=>{const u=b;return s(),h("main",Z,[l(u,{header:r.$t("schedule.title")},{default:i(()=>[m(f(r.$t("schedule.description")),1)]),_:1},8,["header"]),l(X)])}}});export{_e as default};
