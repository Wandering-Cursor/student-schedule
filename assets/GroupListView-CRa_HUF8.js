import{s as I,a as S,b as L}from"./index-CSJKlkpU.js";import{s as F}from"./index-Db6wunYQ.js";import{D as V,o as f,d as h,v as u,x as a,Y as g,E as c,a0 as w,a1 as P,c as y,b,t as E,F as q,z as H,a2 as N,H as U,$}from"./index-CbmMQgMp.js";import{s as j}from"./index-16RuUfRc.js";import{s as x}from"./index-BpuD4ofM.js";import{s as z}from"./index-CD9okw-L.js";import{G as M}from"./GroupLink-iV1xS4qn.js";import{_ as O}from"./SpecialtyLink.vue_vue_type_script_setup_true_lang-BhKqL224.js";import{V as T}from"./Variant-Cxq8psV2.js";import{g as Y}from"./specialty-D6VK_SH4.js";import"./index-B342O1Zq.js";import"./index-BRNBrPPd.js";import"./AnyLink-BeVkD_y0.js";const A=V({__name:"GroupItem",props:{group:{type:Object,required:!0}},setup(i){return(d,l)=>{const o=z;return f(),h(o,null,{title:u(()=>[a(M,{"group-i-d":i.group.uuid,"group-name":i.group.name},null,8,["group-i-d","group-name"])]),footer:u(()=>[a(O,{"specialty-i-d":i.group.specialty.uuid,"specialty-name":i.group.specialty.name,variant:g(T).H3},null,8,["specialty-i-d","specialty-name","variant"])]),_:1})}}}),J=V({__name:"SpecialtySelector",props:{modelValue:{type:String,required:!1}},emits:["update:modelValue"],setup(i,{emit:d}){const l=d,o=c(!1),m=e=>{l("update:modelValue",e)},n=c([]),p=c(""),v=async()=>{o.value=!0;const e=await Y({name:p.value});n.value=e.data.results,o.value=!1};return w(v),(e,t)=>{const _=I;return f(),h(_,{value:i.modelValue,onInput:t[0]||(t[0]=r=>e.$emit("update:modelValue",r.target.value)),options:n.value,optionLabel:r=>r.name,onChange:m,placeholder:e.$t("specialty.filterBy.entity"),filter:"",onFilter:t[1]||(t[1]=r=>{p.value=r.value,v()}),loading:o.value,showClear:!0},null,8,["value","options","optionLabel","placeholder","loading"])}}}),K={class:"contained-wrapper"},Q={class:"filter-panel"},ie=V({__name:"GroupListView",setup(i){const d=c(0),l=c(1),o=c(!1),m=c({count:0,next:null,previous:null,results:[]}),n=P({name:void 0,specialty:void 0}),p=async()=>{o.value=!0;try{const e=await N({page:l.value,...n});m.value=e.data,d.value=l.value*10-10}catch(e){if(l.value!=1)return l.value=1,console.debug("Error loading page, retrying with page 1"),p();throw e}o.value=!1};return w(async()=>{await p()}),(e,t)=>{const _=x,r=j,D=U,B=F,C=S,G=L;return f(),y("main",K,[a(g($),{header:e.$t("groups.title")},{default:u(()=>[b("p",null,E(e.$t("groups.description")),1)]),_:1},8,["header"]),a(g($),{header:e.$t("labels.filters"),toggleable:"",collapsed:!0},{default:u(()=>[b("div",Q,[a(r,null,{default:u(()=>[a(_,{placeholder:e.$t("groups.filterBy.name"),modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=s=>n.name=s)},null,8,["placeholder","modelValue"])]),_:1}),a(r,null,{default:u(()=>[a(J,{"onUpdate:modelValue":t[1]||(t[1]=s=>{if(s.value===null){n.specialty=void 0;return}n.specialty=s.value.uuid})})]),_:1}),a(D,{label:e.$t("labels.applyFilters"),onClick:p,disabled:o.value},null,8,["label","disabled"])])]),_:1},8,["header"]),a(g($),null,{default:u(()=>[a(C,{"data-key":"uuid",value:m.value.results,rows:10},{list:u(s=>[(f(!0),y(q,null,H(s.items,k=>(f(),y("div",null,[a(A,{group:k},null,8,["group"]),a(B)]))),256))]),_:1},8,["value"]),a(G,{"total-records":m.value.count,rows:10,onPage:t[2]||(t[2]=s=>{l.value=s.page+1,p()}),first:d.value},null,8,["total-records","first"])]),_:1})])}}});export{ie as default};
