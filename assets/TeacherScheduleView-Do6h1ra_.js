import{D as g,o as r,d as u,v as l,A as w,t as _,c as i,F as S,z as T,b,x as n,Y as m,f as D,E as f,a0 as A,a1 as x,$ as L}from"./index-Bclff-fz.js";import{s as H,a as I}from"./index-DDKeWlob.js";import{s as O}from"./index-a5cjwW5F.js";import{S as j}from"./ScheduleFilters-dohUEAph.js";import{s as q}from"./index-D72YgAV4.js";import{g as z}from"./schedule-DpGQCsSy.js";import{s as M}from"./index-B6qWqnOp.js";import{a as U,b as W}from"./datetime-DUZGPrj3.js";import{g as Y}from"./urls-BBdSs22m.js";import{A as k}from"./AnyLink-DjKMJNu4.js";import{V as y}from"./Variant-Cxq8psV2.js";import"./index-vfcZcwuq.js";import"./index-DEdcLGsu.js";import"./index-C4vsGNcM.js";import"./index-DPdVtkvW.js";import"./index-D6kP3yXN.js";const G={class:"contained-wrapper"},J=g({__name:"CompactTeacherScheduleItem",props:{schedule:{type:Object,required:!0}},setup(c){const t=c,d=()=>{const e=t.schedule.for_date;return`${U(e)} - ${W(e||"")}`};function a(){var s;const e=[];return(((s=t.schedule.schedule)==null?void 0:s.teachers)??[]).length>0&&e.push("generated"),t.schedule.photos.length>0&&e.push("photo"),e}return(e,s)=>{const o=M;return r(),u(o,null,{title:l(()=>[w(_(d()),1)]),subtitle:l(()=>[(r(!0),i(S,null,T(a(),p=>(r(),i("p",null,_(e.$t(`schedule.teacher.types.${p}`)),1))),256))]),content:l(()=>[b("div",G,[n(k,{"id-field":c.schedule.uuid,"name-field":e.$t("labels.view"),"link-to":"teacher-schedule-detail",variant:m(y).H2,"use-link":!1},null,8,["id-field","name-field","variant"]),c.schedule.student_schedule?(r(),u(k,{key:0,"id-field":m(Y)(c.schedule.student_schedule),"name-field":e.$t("schedule.combined"),linkTo:"schedule-detail",variant:m(y).H4,useLink:!1},null,8,["id-field","name-field","variant"])):D("",!0)])]),_:1})}}}),K={class:"contained-wrapper"},Q=g({__name:"TeacherScheduleList",setup(c){const t=f(!0),d=f(0),a=A({page:1,forDate:void 0,dateTo:void 0,dateFrom:void 0}),e=f(),s=async()=>{t.value=!0;try{const o=await z(a,void 0);e.value=o.data,d.value=a.page*10-10}catch(o){if(a.page!=1)return a.page=1,console.debug("Error loading page, retrying with page 1"),s();throw console.error("Error loading teacher schedule",o),o}t.value=!1};return x(s),(o,p)=>{const V=q,F=j,C=O,N=H,P=I,B=L;return r(),i("main",K,[t.value?(r(),u(V,{key:0,width:"100%",height:"50vh"})):(r(),u(F,{key:1,filters:a,loading:t.value,"onUpdate:filters":s},null,8,["filters","loading"])),t.value?D("",!0):(r(),u(B,{key:2},{default:l(()=>{var v,$;return[n(N,{value:(v=e.value)==null?void 0:v.results,"data-key":"uuid",rows:10},{list:l(h=>[(r(!0),i(S,null,T(h.items,E=>(r(),i("div",null,[n(J,{schedule:E},null,8,["schedule"]),n(C)]))),256))]),_:1},8,["value"]),n(P,{"total-records":($=e.value)==null?void 0:$.count,rows:10,onPage:p[0]||(p[0]=h=>{a.page=h.page+1,s()}),first:d.value},null,8,["total-records","first"])]}),_:1}))])}}}),R={class:"contained-wrapper"},me=g({__name:"TeacherScheduleView",setup(c){return(t,d)=>{const a=L;return r(),i("main",null,[b("div",R,[n(a,{header:t.$t("schedule.teacher.title")},{default:l(()=>[w(_(t.$t("schedule.teacher.description")),1)]),_:1},8,["header"]),n(a,null,{default:l(()=>[n(Q)]),_:1})])])}}});export{me as default};
